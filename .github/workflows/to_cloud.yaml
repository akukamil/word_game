         
name: Deploy to Cloud

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Configure AWS CLI
      run: |
        aws configure set aws_access_key_id ${{ secrets.YANDEX_KEY }}
        aws configure set aws_secret_access_key ${{ secrets.YANDEX_SECRET }}
        aws configure set default.region ru-central1
        aws configure set output json

    - name: Sync files to Storage
      run: |
        aws --endpoint-url=https://storage.yandexcloud.net/ s3 sync ./ s3://word-game/ \
            --exclude ".git/*" \
            --exclude ".github/*" \
            --exclude ".gitignore" \
            --exclude ".gitattributes"
            